<!--
 * @Author: zhaoqian.tang
 * @Date: 2021-04-02 16:45:57
 * @LastEditTime: 2021-04-20 15:28:05
 * @LastEditors: your name
 * @Description: 
-->

# 一体化报表前端技术方案

## 1. 需求背景
一体化报表是希望通过打通到店、收银侧的商户后台，能够从后台账户、逻辑、产品口径三个维度去统一。并且提供账单数据批量查看和导出功能，账号权限、数据字段量和数据量是重点

## 2. 技术设计
前端需要涉及多业务方，尽可能简化业务方的使用方式。让业务方直接iframe嵌入我们的页面是较为便利业务方的做法之一，可以把代码层面与业务方隔绝开。代码和逻辑都由我们来处理，便于双方的开发也有利于后期维护。

每张表单独拆成一个组件，粒度较小，允许使用方组合使用，也避免互相耦合。标题之类的放在web项目和kraken中，减少组件与业务的耦合性

## 3. 组件设计
本次大部分组件都比较相似，都为筛选项加数据表的格式。但是筛选项较多并且数据表字段多。建议产品增加了查询按钮，降低请求频次（非每次修改筛选项都查询数据）。组件设计为非受控组件，事件触发时更新所有筛选项值即可。事件流也较为简单，可以通过监控分页器和筛选项值变化控制数据表。

因为筛选项较多，抽离筛选项常量作统一渲染下拉选项。开发时后端尚不确定入参字段，所以加了一层入参转换，前端尽可能少的受后端入参变化。

## 4.项目规划
主要的代码都在组件库中，针对组件统一封装的请求模块、BI-Studio模块和打点模块。


上线是遇到配置菜单权限不生效问题，原因是配置线上地址时域名错误